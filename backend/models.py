from sqlalchemy import Column, Integer, String, Float, DateTime, Date, Boolean, JSON\nfrom sqlalchemy.sql import func\nfrom database import Base\nfrom datetime import datetime\n\nclass HeroSalesData(Base):\n    """Historical sales data model for Hero MotoCorp"""\n    __tablename__ = "hero_sales_data"\n    \n    id = Column(Integer, primary_key=True, index=True)\n    invoice_date = Column(Date, nullable=False, index=True)\n    sku_code = Column(String(50), nullable=False, index=True)\n    model_name = Column(String(100), nullable=False, index=True)\n    variant = Column(String(100), nullable=False)\n    colour = Column(String(50), nullable=False)\n    quantity_sold = Column(Integer, nullable=False)\n    unit_price = Column(Float, nullable=False)\n    total_value = Column(Float, nullable=False)\n    location = Column(String(100), nullable=True)\n    region = Column(String(50), nullable=True)\n    created_at = Column(DateTime, server_default=func.now())\n    updated_at = Column(DateTime, server_default=func.now(), onupdate=func.now())\n    \nclass ForecastData(Base):\n    """Forecast predictions model"""\n    __tablename__ = "forecast_data"\n    \n    id = Column(Integer, primary_key=True, index=True)\n    forecast_date = Column(Date, nullable=False, index=True)\n    sku_code = Column(String(50), nullable=False, index=True)\n    model_name = Column(String(100), nullable=False)\n    variant = Column(String(100), nullable=False)\n    colour = Column(String(50), nullable=False)\n    predicted_quantity = Column(Float, nullable=False)\n    confidence_lower = Column(Float, nullable=False)\n    confidence_upper = Column(Float, nullable=False)\n    forecast_method = Column(String(20), default="prophet")  # prophet, xgboost, lstm\n    created_at = Column(DateTime, server_default=func.now())\n    \nclass DispatchRecommendation(Base):\n    """Dispatch planning recommendations"""\n    __tablename__ = "dispatch_recommendations"\n    \n    id = Column(Integer, primary_key=True, index=True)\n    recommendation_date = Column(Date, nullable=False, index=True)\n    sku_code = Column(String(50), nullable=False, index=True)\n    model_name = Column(String(100), nullable=False)\n    variant = Column(String(100), nullable=False)\n    colour = Column(String(50), nullable=False)\n    recommended_quantity = Column(Integer, nullable=False)\n    buffer_stock = Column(Integer, nullable=False)\n    risk_score = Column(Float, nullable=False)  # 0-1: risk of overstock/understock\n    risk_type = Column(String(20), default="neutral")  # overstock, understock, neutral\n    working_capital_impact = Column(Float, nullable=False)\n    notes = Column(String(500), nullable=True)\n    created_at = Column(DateTime, server_default=func.now())\n\nclass SKUPerformance(Base):\n    """SKU-wise performance metrics"""\n    __tablename__ = "sku_performance"\n    \n    id = Column(Integer, primary_key=True, index=True)\n    sku_code = Column(String(50), nullable=False, unique=True, index=True)\n    model_name = Column(String(100), nullable=False)\n    variant = Column(String(100), nullable=False)\n    colour = Column(String(50), nullable=False)\n    total_units_sold = Column(Integer, default=0)\n    total_revenue = Column(Float, default=0)\n    yoy_growth_percent = Column(Float, nullable=True)\n    mom_growth_percent = Column(Float, nullable=True)\n    last_month_sales = Column(Integer, default=0)\n    current_month_sales = Column(Integer, default=0)\n    seasonality_factor = Column(Float, default=1.0)\n    is_slow_moving = Column(Boolean, default=False)\n    created_at = Column(DateTime, server_default=func.now())\n    updated_at = Column(DateTime, server_default=func.now(), onupdate=func.now())\n\nclass DashboardMetrics(Base):\n    """Summary metrics for dashboard"""\n    __tablename__ = "dashboard_metrics"\n    \n    id = Column(Integer, primary_key=True, index=True)\n    metric_date = Column(Date, nullable=False, unique=True, index=True)\n    total_sales_units = Column(Integer, default=0)\n    total_sales_revenue = Column(Float, default=0)\n    unique_skus = Column(Integer, default=0)\n    avg_daily_sales = Column(Float, default=0)\n    top_sku = Column(String(50), nullable=True)\n    top_variant = Column(String(100), nullable=True)\n    top_colour = Column(String(50), nullable=True)\n    forecast_accuracy = Column(Float, nullable=True)\n    created_at = Column(DateTime, server_default=func.now())